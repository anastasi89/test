(()=>{"use strict";function t(t){const i=function(t){let s=0,i=!1;if(t){const e=String(t).replace(/[^\d]/g,"");for(let t=e.length-1;t>=0;t-=1){let n=parseInt(e.charAt(t),10);i&&(n*=2,n>9&&(n-=9)),s+=n,i=!i}return s%10==0}return!1}(t);let e;e=t.length>=14&&t.length<=16;const n=function(t){return/^[0-9]+$/.test(t)}(t),a=function(t){if(null!=s(t))return!0;return!1}(t);return i&&e&&n&&a}function s(t){let s=null;return/^4/.test(t)&&(s=".visa"),/^5[1-5]/.test(t)&&(s=".mastercard"),/^3[47]/.test(t)&&(s=".amex"),/^(?:2131|1800|35\d{3})\d{11}/.test(t)&&(s=".jcb"),/^2/.test(t)&&(s=".mir"),/^6(?:011|5)/.test(t)&&(s=".discover"),/^3(?:0[0-5]|[68])/.test(t)&&(s=".diners"),s}class i{constructor(t){this.parentEl=t,this.onSubmit=this.onSubmit.bind(this)}static get markup(){return'<div class="validator_body">\n    <div class="validator_content">\n      <div class="validator_tittle">\n        <h1>Credit Card Validator</h1>\n      </div>\n      <div class="validator_widget widget">\n        <ul class="widget_list">\n           <div class="widget_item">\n             <li class="card visa cardNoMain"><span class="hidden">Visa</span></li>\n           </div>\n           <div class="widget_item">\n             <li class="card mastercard cardNoMain"><span class="hidden">MasterCard</span>\n             </li>\n           </div>\n           <div class="widget_item">\n             <li class="card amex cardNoMain"><span class="hidden">American Express</span></li>\n           </div>\n           <div class="widget_item">\n             <li class="card discover cardNoMain"><span class="hidden">Discover</span></li>\n           </div>\n           <div class="widget_item">\n             <li class="card jcb cardNoMain"><span class="hidden">JCB</span></li>\n           </div>\n           <div class="widget_item">\n             <li class="card diners cardNoMain"><span class="hidden">Dinners Club</span></li>\n           </div>\n           <div class="widget_item">\n             <li class="card mir cardNoMain"><span class="hidden">МИР</span></li>\n           </div>\n         </ul>\n        <form class="widget_form">\n          <div class="widget_input">\n            <input class="input" type="number" placeholder="Enter the card number">\n            <button class="button" type="submit">validate</button>\n          </div>\n          <div class="result hidden">\n            <span class="result_text hidden">карта существует?</span>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>'}bindToDOM(){this.parentEl.innerHTML=i.markup,this.element=this.parentEl.querySelector(".validator_body"),this.submit=this.element.querySelector(".button"),this.input=this.element.querySelector(".input"),this.resultcont=this.element.querySelector(".result"),this.result=this.element.querySelector(".result_text"),this.submit.addEventListener("click",(t=>{t.preventDefault(),this.onSubmit()}))}onSubmit(){const{value:s}=this.input;t(s)?(this.showCard(s),this.showMessage("valid","invalid","card is valid")):this.showMessage("invalid","valid","card is not valid")}showCard(t){this.cardPay=this.element.querySelector(s(t)),this.cardPay.classList.remove("cardNoMain"),this.cardPay.classList.add("cardMain")}showMessage(t,s,i){this.resultcont.classList.add(t),this.resultcont.classList.remove(s),this.result.textContent=i,this.resultcont.classList.remove("hidden"),this.result.classList.remove("hidden"),this.input.addEventListener("click",(()=>{this.clearAll()}))}clearAll(){this.resultcont.classList.add("hidden"),this.result.classList.add("hidden"),this.input.value="",this.input.removeEventListener("click",(()=>{this.clearAll()})),this.cardPay.classList.remove("cardMain"),this.cardPay.classList.add("cardNoMain")}}const e=document.querySelector(".container");new i(e).bindToDOM()})();